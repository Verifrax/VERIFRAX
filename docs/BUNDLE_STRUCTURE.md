# Evidence Pack Bundle Structure

Standard evidence pack layout for dispute-ready truth units.

## Directory Structure

```
bundle/
├── bundle.json              # Manifest with metadata
├── claims/                  # First-class claims
│   ├── claim-*.json
│   └── ...
├── evidence/                # Evidence files
│   ├── evidence-*.json
│   ├── artifacts/
│   └── ...
├── artifacts/               # Original artifacts
│   └── ...
├── contracts/               # Contract definitions
│   ├── verdict.contract.json
│   ├── claim.contract.json
│   └── ...
├── schemas/                 # Schema definitions
│   ├── verdict.schema.json
│   ├── claim.schema.json
│   └── ...
├── profiles/                # Profile definitions
│   ├── public.json
│   ├── enterprise.json
│   └── ...
├── signatures/              # Cryptographic signatures
│   ├── claim-*.sig
│   └── ...
├── transparency/           # Transparency log entries
│   ├── log.json
│   └── ...
├── attestations/           # Reality anchoring attestations
│   ├── attestation-*.json
│   └── ...
└── verdict.json            # Verdict output (generated by verifier)
```

## bundle.json Manifest

```json
{
  "bundle_version": "1.0.0",
  "bundle_id": "uuid",
  "created_at": "ISO8601",
  "profile_id": "public@1.0.0",
  "claims": [
    {
      "claim_id": "uuid",
      "file": "claims/claim-*.json"
    }
  ],
  "evidence": [
    {
      "evidence_id": "uuid",
      "evidence_type": "string",
      "file": "evidence/evidence-*.json",
      "hash": "sha256:..."
    }
  ],
  "contracts": [
    {
      "contract_id": "verdict@1.0.0",
      "file": "contracts/verdict.contract.json",
      "hash": "sha256:..."
    }
  ],
  "schemas": [
    {
      "schema_id": "verdict/v1",
      "file": "schemas/verdict.schema.json",
      "hash": "sha256:..."
    }
  ],
  "anchors": [
    {
      "type": "eth",
      "proof_ref": "anchors/eth.json"
    }
  ],
  "attestations": [
    {
      "attestation_id": "uuid",
      "file": "attestations/attestation-*.json"
    }
  ]
}
```

## Bundle Hash Calculation

The bundle hash is computed as:

1. Sort all files in bundle (excluding `verdict.json` which is generated)
2. Compute SHA-256 of each file
3. Create merkle tree of file hashes
4. Root hash = bundle hash

This ensures:
- Deterministic hash calculation
- Any file change changes bundle hash
- Bundle hash can be verified independently

## Verification Process

1. Load `bundle.json` manifest
2. Verify all referenced files exist
3. Verify file hashes match manifest
4. Load claims from `claims/` directory
5. Load evidence from `evidence/` directory
6. Verify signatures in `signatures/` directory
7. Check for contradictions
8. Check for invalidations
9. Apply profile requirements
10. Generate `verdict.json`

## Enforcement

Enforced by:
- `scripts/bundle.build.mjs` - Builds bundles with correct structure
- `scripts/bundle.verify.mjs` - Verifies bundle structure
- Verifier implementations must enforce this structure

