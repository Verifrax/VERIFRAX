name: UI Contract - Non-Authority Constraints

on:
  push:
  pull_request:

jobs:
  enforce-ui-non-authority:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Enforce read-only, fact-only UI
        run: |
          set -euo pipefail
          FORBIDDEN_WORDS="recommend|should|why|guide|help|tutorial|how to|best practice|advice"

          echo "Scanning UI surface..."
          MATCHES=$(rg -n -i -S "(${FORBIDDEN_WORDS})" public docs .github \
            | rg -v "^public/VERDICT_REFERENCE_v1\.md:" || true)

          if [ -n "$MATCHES" ]; then
            echo "❌ FORBIDDEN AUTHORITY LANGUAGE DETECTED"
            echo "$MATCHES"
            exit 1
          fi

          echo "✅ UI contract satisfied"
